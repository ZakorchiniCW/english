<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-ELDVDP0M7R');
    </script>


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testar Aprendizado</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1f2937, #111827);
            background-attachment: fixed;
            color: #e5e7eb;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: #1f2937;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: 700;
            color: #f3f4f6;
            margin: 0;
        }

        .scores {
            display: flex;
            gap: 20px;
            font-size: 1.2em;
            font-weight: 600;
            margin-top: 10px;
        }

        .score-box {
            padding: 8px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .correct {
            background-color: #34d399;
            color: #1f2937;
        }

        .incorrect {
            background-color: #ef4444;
            color: #1f2937;
        }

        .card {
            background-color: #374151;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #question-text {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 20px;
            color: #f3f4f6;
        }

        #answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Força 2 colunas */
            gap: 15px;
        }

        .answer-btn {
            background-color: #4b5563;
            color: #f3f4f6;
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            word-wrap: break-word; /* Garante que o texto não ultrapasse o botão */
        }

        .answer-btn:hover {
            background-color: #6b7280;
            transform: translateY(-2px);
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .answer-btn.correct {
            background-color: #10b981;
            color: #fff;
            animation: pulse 1.5s infinite;
        }

        .answer-btn.incorrect {
            background-color: #ef4444;
            color: #fff;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
            100% {
                transform: scale(1);
            }
        }

        #messageBox {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            background-color: #10b981;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            font-weight: 600;
            transition: opacity 0.5s, transform 0.5s;
            opacity: 0;
            pointer-events: none;
        }

        #messageBox.show {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .link-btn {
            background-color: #3b82f6;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        @media (max-width: 400px) {
            .link-btn {
                padding: 8px 12px;
                font-size: 0.9em;
            }
            .answer-btn {
                padding: 10px 15px;
                font-size: 1em;
            }
        }

        .whatsapp-btn {
            background-color: #25d366;
        }

        .whatsapp-btn:hover {
            background-color: #128c7e;
        }

        .refresh-btn:hover {
            background-color: #2563eb;
        }

        .loading-text {
            color: #d1d5db;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <div class="button-group">
                <a href="https://zakorchinicw.github.io/english/newtreineingles.html" class="link-btn">
                    Voltar para Treinar
                </a>
                <a href="https://wa.me/?text=Teste%20seu%20aprendizado%20https%3A%2F%2Fzakorchinicw.github.io%2Fenglish%2Ftestaraprendizado.html" style="margin:10px" target="_blank" class="link-btn whatsapp-btn" title="Compartilhar no WhatsApp">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M12.04 2.167A9.873 9.873 0 0 0 2.19 12.001a9.852 9.852 0 0 0 4.197 7.915L5.798 21.5l2.459-1.31a10.05 10.05 0 0 0 3.784.811c5.448 0 9.864-4.415 9.864-9.849 0-5.435-4.416-9.85-9.865-9.85zm4.814 13.918c-.276.549-.806.735-1.503.407-.28-.135-1.642-.676-1.897-.751-.255-.075-.439-.038-.623.339-.184.377-.714.936-1.071 1.059-.356.124-.623.109-1.153-.153-.53-.262-2.228-1.018-2.793-3.14-.566-2.122.096-3.111.439-3.66.343-.549.548-.52.825-.52.277 0 .409.038.623.509.214.469.714 1.764.766 1.897.051.133.037.266-.076.401-.113.134-.184.224-.368.409-.184.185-.383.37-.501.52-.117.15-.224.28-.109.52.115.24 1.153 1.897 1.458 1.897.305 0 .396-.135.58-.269.184-.135.53-.269.806-.182.276.09.92.356 1.071.699.15.342.15.526.075.903z"></path>
                    </svg>
                </a>
            </div>
            <div class="scores">
                <div class="score-box correct">
                    Acertos: <span id="correct-count">0</span>
                </div>
                <div class="score-box incorrect">
                    Erros: <span id="incorrect-count">0</span>
                </div>
            </div>
        </div>

        <button id="refresh-btn-top" class="link-btn" style="width: 100%; margin-bottom: 20px;">Próxima Pergunta</button>


        <div id="loading-message" class="loading-text">Carregando dados...</div>

        <div id="quiz-content" class="card" style="display: none;">
            <h2 id="question-text"></h2>
            <div id="answer-buttons"></div>
        </div>
    </div>

    <div id="messageBox"></div>

    <script>
        let frasesData = [];
        let verbosData = [];
        let phrasalVerbsData = [];
        let adjetivosData = [];
        let adverbiosData = [];
        let substantivosData = [];

        let correctCount = 0;
        let incorrectCount = 0;
        let currentQuestion = null;

        const correctDisplay = document.getElementById('correct-count');
        const incorrectDisplay = document.getElementById('incorrect-count');
        const messageBox = document.getElementById('messageBox');
        const refreshBtnTop = document.getElementById('refresh-btn-top');
        const loadingMessage = document.getElementById('loading-message');
        const quizContent = document.getElementById('quiz-content');

        const motivationalPhrases = [
            "Excellent!", "Congratulations!", "Good!", "You did well!", "That's it!",
            "Absolutely correct!", "Keep it up!", "Very good!"
        ];

        const dataTypes = ['frase', 'verbo', 'phrasalVerb', 'adjetivo', 'adverbio', 'substantivo'];

        async function loadDataFromGithub() {
            try {
                const urls = {
                    frase: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/frases.txt',
                    verbo: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/verbos.txt',
                    phrasalVerb: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/phrasalverbs.txt',
                    adjetivo: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/adjetivos.txt',
                    adverbio: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/adverbios.txt',
                    substantivo: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/substantivos.txt'
                };

                const [
                    frasesResponse,
                    verbosResponse,
                    phrasalVerbsResponse,
                    adjetivosResponse,
                    adverbiosResponse,
                    substantivosResponse
                ] = await Promise.all([
                    fetch(urls.frase),
                    fetch(urls.verbo),
                    fetch(urls.phrasalVerb),
                    fetch(urls.adjetivo),
                    fetch(urls.adverbio),
                    fetch(urls.substantivo)
                ]);

                frasesData = (await frasesResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'frase' };
                });

                verbosData = (await verbosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1, detail2, detail3] = line.split(';');
                    return { id: index + 1, text, detail1, detail2, detail3, type: 'verbo' };
                });

                phrasalVerbsData = (await phrasalVerbsResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'phrasalVerb' };
                });

                adjetivosData = (await adjetivosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'adjetivo' };
                });

                adverbiosData = (await adverbiosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'adverbio' };
                });

                substantivosData = (await substantivosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'substantivo' };
                });

                loadingMessage.style.display = 'none';
                quizContent.style.display = 'block';
                generateQuestion();

            } catch (error) {
                console.error('Erro ao carregar os dados:', error);
                loadingMessage.textContent = 'Erro ao carregar os dados. Por favor, verifique as URLs.';
            }
        }

        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateQuestion() {
            const questionTextElement = document.getElementById('question-text');
            const answerButtonsContainer = document.getElementById('answer-buttons');

            answerButtonsContainer.innerHTML = '';
            messageBox.classList.remove('show');

            const selectedType = getRandomItem(dataTypes);
            let selectedData, questionText, correctAnswer, allOptions;
            let otherOptions = [];

            switch (selectedType) {
                case 'frase':
                    selectedData = getRandomItem(frasesData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = frasesData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'verbo':
                    selectedData = getRandomItem(verbosData);
                    questionText = selectedData.detail1;
                    correctAnswer = selectedData.text;
                    otherOptions = verbosData.filter(item => item !== selectedData).map(item => item.text);
                    break;
                case 'phrasalVerb':
                    selectedData = getRandomItem(phrasalVerbsData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = phrasalVerbsData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'adjetivo':
                    selectedData = getRandomItem(adjetivosData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = adjetivosData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'adverbio':
                    selectedData = getRandomItem(adverbiosData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = adverbiosData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'substantivo':
                    selectedData = getRandomItem(substantivosData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = substantivosData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
            }

            questionTextElement.textContent = questionText;
            currentQuestion = {
                correctAnswer,
                type: selectedType
            };

            const uniqueOptions = Array.from(new Set(otherOptions));
            const shuffledOptions = uniqueOptions.sort(() => 0.5 - Math.random());
            const finalOptions = shuffledOptions.slice(0, 5); // Change to 5 to get 6 options total
            finalOptions.push(correctAnswer);

            const shuffledFinalOptions = finalOptions.sort(() => 0.5 - Math.random());

            shuffledFinalOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('answer-btn');
                if (option === correctAnswer) {
                    button.dataset.correct = 'true';
                } else {
                    button.dataset.correct = 'false';
                }
                answerButtonsContainer.appendChild(button);
            });

            document.querySelectorAll('.answer-btn').forEach(button => {
                button.addEventListener('click', () => checkAnswer(button));
            });
        }

        function checkAnswer(button) {
            const isCorrect = button.dataset.correct === 'true';

            if (isCorrect) {
                button.classList.add('correct');
                correctCount++;

                const answerButtons = document.querySelectorAll('.answer-btn');
                answerButtons.forEach(btn => btn.disabled = true);

                const randomPhrase = getRandomItem(motivationalPhrases);
                messageBox.textContent = `${randomPhrase}`;
                messageBox.classList.add('show');

                setTimeout(() => {
                    messageBox.classList.remove('show');
                    generateQuestion();
                }, 1500);
            } else {
                button.classList.add('incorrect');
                incorrectCount++;
                button.disabled = true;
            }

            correctDisplay.textContent = correctCount;
            incorrectDisplay.textContent = incorrectCount;
        }

        refreshBtnTop.addEventListener('click', generateQuestion);

        window.onload = loadDataFromGithub;
    </script>


</body>
</html>
