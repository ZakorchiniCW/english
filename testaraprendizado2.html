<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script async="" src="./Testar Aprendizado_files/js"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-ELDVDP0M7R');
    </script>


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testar Aprendizado</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1f2937, #111827);
            background-attachment: fixed;
            color: #e5e7eb;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: #1f2937;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: 700;
            color: #f3f4f6;
            margin: 0;
        }

        .scores {
            display: flex;
            gap: 20px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .score-box {
            padding: 8px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .correct {
            background-color: #34d399;
            color: #1f2937;
        }

        .incorrect {
            background-color: #ef4444;
            color: #1f2937;
        }

        .card {
            background-color: #374151;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #question-text {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 20px;
            color: #f3f4f6;
        }

        #answer-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .answer-btn {
            background-color: #4b5563;
            color: #f3f4f6;
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .answer-btn:hover {
            background-color: #6b7280;
            transform: translateY(-2px);
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .answer-btn.correct {
            background-color: #10b981;
            color: #fff;
            animation: pulse 1.5s infinite;
        }

        .answer-btn.incorrect {
            background-color: #ef4444;
            color: #fff;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
            100% {
                transform: scale(1);
            }
        }

        #messageBox {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            background-color: #10b981;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            font-weight: 600;
            transition: opacity 0.5s, transform 0.5s;
            opacity: 0;
            pointer-events: none;
        }

        #messageBox.show {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .refresh-btn {
            background-color: #3b82f6;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .refresh-btn:hover {
            background-color: #2563eb;
        }

        .loading-text {
            color: #d1d5db;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <button id="refresh-btn-top" class="refresh-btn">Próxima Pergunta</button>
            <div class="scores">
                <div class="score-box correct">
                    Acertos: <span id="correct-count">0</span>
                </div>
                <div class="score-box incorrect">
                    Erros: <span id="incorrect-count">0</span>
                </div>
            </div>
        </div>

        <div id="loading-message" class="loading-text">Carregando dados...</div>

        <div id="quiz-content" class="card" style="display: none;">
            <h2 id="question-text"></h2>
            <div id="answer-buttons"></div>
        </div>
    </div>

    <div id="messageBox"></div>

    <script>
        let frasesData = [];
        let verbosData = [];
        let phrasalVerbsData = [];
        let adjetivosData = [];
        let adverbiosData = [];
        let substantivosData = [];

        let correctCount = 0;
        let incorrectCount = 0;
        let currentQuestion = null;

        const correctDisplay = document.getElementById('correct-count');
        const incorrectDisplay = document.getElementById('incorrect-count');
        const messageBox = document.getElementById('messageBox');
        const refreshBtnTop = document.getElementById('refresh-btn-top');
        const loadingMessage = document.getElementById('loading-message');
        const quizContent = document.getElementById('quiz-content');

        const motivationalPhrases = [
            "Excelente!", "Parabéns!", "Boa!", "Mandou bem!", "Isso aí!",
            "Certíssimo!", "Continua assim!", "Muito bem!"
        ];

        const dataTypes = ['frase', 'verbo', 'phrasalVerb', 'adjetivo', 'adverbio', 'substantivo'];

        async function loadDataFromGithub() {
            try {
                const urls = {
                    frase: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/frases.txt',
                    verbo: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/verbos.txt',
                    phrasalVerb: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/phrasalverbs.txt',
                    adjetivo: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/adjetivos.txt',
                    adverbio: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/adverbios.txt',
                    substantivo: 'https://raw.githubusercontent.com/ZakorchiniCW/english/refs/heads/main/substantivos.txt'
                };

                const [
                    frasesResponse,
                    verbosResponse,
                    phrasalVerbsResponse,
                    adjetivosResponse,
                    adverbiosResponse,
                    substantivosResponse
                ] = await Promise.all([
                    fetch(urls.frase),
                    fetch(urls.verbo),
                    fetch(urls.phrasalVerb),
                    fetch(urls.adjetivo),
                    fetch(urls.adverbio),
                    fetch(urls.substantivo)
                ]);

                frasesData = (await frasesResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'frase' };
                });

                verbosData = (await verbosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1, detail2, detail3] = line.split(';');
                    return { id: index + 1, text, detail1, detail2, detail3, type: 'verbo' };
                });

                phrasalVerbsData = (await phrasalVerbsResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'phrasalVerb' };
                });

                adjetivosData = (await adjetivosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'adjetivo' };
                });

                adverbiosData = (await adverbiosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'adverbio' };
                });

                substantivosData = (await substantivosResponse.text()).split('\n').filter(line => line.trim() !== '').map((line, index) => {
                    const [text, detail1] = line.split(';');
                    return { id: index + 1, text, detail1, type: 'substantivo' };
                });

                loadingMessage.style.display = 'none';
                quizContent.style.display = 'block';
                generateQuestion();

            } catch (error) {
                console.error('Erro ao carregar os dados:', error);
                loadingMessage.textContent = 'Erro ao carregar os dados. Por favor, verifique as URLs.';
            }
        }

        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateQuestion() {
            const questionTextElement = document.getElementById('question-text');
            const answerButtonsContainer = document.getElementById('answer-buttons');

            answerButtonsContainer.innerHTML = '';
            messageBox.classList.remove('show');

            const selectedType = getRandomItem(dataTypes);
            let selectedData, questionText, correctAnswer, allOptions;
            let otherOptions = [];

            switch (selectedType) {
                case 'frase':
                    selectedData = getRandomItem(frasesData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = frasesData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'verbo':
                    selectedData = getRandomItem(verbosData);
                    questionText = selectedData.detail1;
                    correctAnswer = selectedData.text;
                    otherOptions = verbosData.filter(item => item !== selectedData).map(item => item.text);
                    break;
                case 'phrasalVerb':
                    selectedData = getRandomItem(phrasalVerbsData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = phrasalVerbsData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'adjetivo':
                    selectedData = getRandomItem(adjetivosData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = adjetivosData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'adverbio':
                    selectedData = getRandomItem(adverbiosData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = adverbiosData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
                case 'substantivo':
                    selectedData = getRandomItem(substantivosData);
                    questionText = selectedData.text;
                    correctAnswer = selectedData.detail1;
                    otherOptions = substantivosData.filter(item => item !== selectedData).map(item => item.detail1);
                    break;
            }

            questionTextElement.textContent = questionText;
            currentQuestion = {
                correctAnswer,
                type: selectedType
            };

            const uniqueOptions = Array.from(new Set(otherOptions));
            const shuffledOptions = uniqueOptions.sort(() => 0.5 - Math.random());
            const finalOptions = shuffledOptions.slice(0, 3);
            finalOptions.push(correctAnswer);

            const shuffledFinalOptions = finalOptions.sort(() => 0.5 - Math.random());

            shuffledFinalOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('answer-btn');
                if (option === correctAnswer) {
                    button.dataset.correct = 'true';
                } else {
                    button.dataset.correct = 'false';
                }
                answerButtonsContainer.appendChild(button);
            });

            document.querySelectorAll('.answer-btn').forEach(button => {
                button.addEventListener('click', () => checkAnswer(button));
            });
        }

        function checkAnswer(button) {
            const isCorrect = button.dataset.correct === 'true';

            if (isCorrect) {
                button.classList.add('correct');
                correctCount++;

                const answerButtons = document.querySelectorAll('.answer-btn');
                answerButtons.forEach(btn => btn.disabled = true);

                const randomPhrase = getRandomItem(motivationalPhrases);
                messageBox.textContent = `${randomPhrase}`;
                messageBox.classList.add('show');

                setTimeout(() => {
                    messageBox.classList.remove('show');
                    generateQuestion();
                }, 1500);
            } else {
                button.classList.add('incorrect');
                incorrectCount++;
                button.disabled = true;
            }

            correctDisplay.textContent = correctCount;
            incorrectDisplay.textContent = incorrectCount;
        }

        refreshBtnTop.addEventListener('click', generateQuestion);

        window.onload = loadDataFromGithub;
    </script>


</body></html>
